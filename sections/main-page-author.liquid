{% style %}
  .main-author--author {
    background-color: {{ section.settings.background_author }};
  }
{% endstyle %}
<div class="section-spacing section-spacing--tight">
  <div class="main-author--author">
    <div class="container container--xl">
      <div class="main-author--author-container">
        <div class="main-author--author-top">
          {%- if section.settings.name != blank -%}
            <div class="main-author--author-top-content">
              <h2 class="main-author--author-name h3">{{ section.settings.name }}</h2>
              {%- if section.settings.instagram != blank or section.settings.twitter != blank -%}
                <div class="main-author--author-social">
                  {%- if section.settings.instagram != blank -%}
                    <a href="{{ section.settings.instagram }}" target="_blank" rel="noopener nocaes">
                      <svg width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M8.27326 3.05416C9.23411 3.01036 9.54091 3 11.9876 3C14.4343 3 14.7411 3.01036 15.7019 3.05416C16.6608 3.09785 17.3157 3.25001 17.8888 3.47247C18.4812 3.70247 18.9836 4.01021 19.4844 4.51055C19.9852 5.01092 20.2933 5.51283 20.5235 6.10466C20.7462 6.67712 20.8985 7.33137 20.9423 8.28931C20.9861 9.24926 20.9965 9.55575 20.9965 12C20.9965 14.4443 20.9861 14.7507 20.9423 15.7107C20.8985 16.6686 20.7462 17.3229 20.5235 17.8953C20.2933 18.4872 19.9852 18.9891 19.4844 19.4895C18.9836 19.9898 18.4812 20.2975 17.8888 20.5275C17.3157 20.75 16.6608 20.9021 15.7019 20.9458C14.7411 20.9896 14.4343 21 11.9876 21C9.54091 21 9.23411 20.9896 8.27326 20.9458C7.31433 20.9021 6.65948 20.75 6.08642 20.5275C5.494 20.2975 4.9916 19.9898 4.49077 19.4895C3.98994 18.9891 3.6819 18.4872 3.45167 17.8953C3.22895 17.3229 3.07668 16.6686 3.03291 15.7107C2.98907 14.7507 2.9787 14.4443 2.9787 12C2.9787 9.55575 2.98907 9.24926 3.03291 8.28931C3.07668 7.33137 3.22895 6.67712 3.45167 6.10466C3.6819 5.51283 3.98994 5.01092 4.49077 4.51055C4.9916 4.01021 5.494 3.70247 6.08642 3.47247C6.65948 3.25001 7.31433 3.09785 8.27326 3.05416ZM15.6279 4.6741C14.678 4.6308 14.3931 4.62162 11.9876 4.62162C9.5821 4.62162 9.2972 4.6308 8.34721 4.6741C7.46889 4.71411 6.99184 4.86073 6.6744 4.98398C6.25392 5.14725 5.95382 5.34227 5.63855 5.65723C5.32332 5.97215 5.12806 6.27196 4.96464 6.69206C4.8413 7.00919 4.69454 7.48574 4.65445 8.36323C4.61111 9.31224 4.60195 9.5969 4.60195 12C4.60195 14.4031 4.61111 14.6878 4.65445 15.6368C4.69454 16.5143 4.8413 16.9908 4.96464 17.3079C5.12806 17.728 5.32332 18.0278 5.63855 18.3428C5.95382 18.6577 6.25392 18.8528 6.6744 19.016C6.99184 19.1393 7.46889 19.2859 8.34725 19.3259C9.29705 19.3692 9.58196 19.3784 11.9876 19.3784C14.3932 19.3784 14.6781 19.3692 15.6279 19.3259C16.5063 19.2859 16.9833 19.1393 17.3008 19.016C17.7213 18.8528 18.0214 18.6577 18.3366 18.3428C18.6519 18.0278 18.8471 17.728 19.0105 17.3079C19.1339 16.9908 19.2806 16.5143 19.3207 15.6368C19.3641 14.6878 19.3732 14.4031 19.3732 12C19.3732 9.5969 19.3641 9.31224 19.3207 8.36323C19.2806 7.48574 19.1339 7.00919 19.0105 6.69206C18.8471 6.27196 18.6519 5.97215 18.3366 5.65723C18.0214 5.34227 17.7213 5.14725 17.3008 4.98398C16.9833 4.86073 16.5063 4.71411 15.6279 4.6741ZM8.99787 12.009C8.99787 13.6324 10.3424 14.9485 12.0008 14.9485C13.6593 14.9485 15.0038 13.6324 15.0038 12.009C15.0038 10.3855 13.6593 9.06948 12.0008 9.06948C10.3424 9.06948 8.99787 10.3855 8.99787 12.009ZM7.37466 12.009C7.37466 9.50799 9.44588 7.48056 12.0008 7.48056C14.5558 7.48056 16.627 9.50799 16.627 12.009C16.627 14.51 14.5558 16.5374 12.0008 16.5374C9.44588 16.5374 7.37466 14.51 7.37466 12.009ZM16.1487 8.49799C16.7457 8.49799 17.2297 8.02423 17.2297 7.43978C17.2297 6.85533 16.7457 6.38157 16.1487 6.38157C15.5516 6.38157 15.0676 6.85533 15.0676 7.43978C15.0676 8.02423 15.5516 8.49799 16.1487 8.49799Z"></path></svg>
                    </a>
                  {%- endif -%} 
                  {%- if section.settings.twitter != blank -%}
                    <a href="{{ section.settings.twitter }}" target="_blank" rel="noopener nocaes">
                      <svg width="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13.6468 10.4686L20.9321 2H19.2057L12.8799 9.3532L7.82741 2H2L9.6403 13.1193L2 22H3.72649L10.4068 14.2348L15.7425 22H21.57L13.6468 10.4686ZM11.2821 13.2173L10.508 12.1101L4.34857 3.29968H7.00037L11.9711 10.4099L12.7452 11.5172L19.2066 20.7594H16.5548L11.2821 13.2173Z"></path></svg>
                    </a>
                  {%- endif -%} 
                </div>
              {%- endif -%}
            </div>
          {%- endif -%}
          {%- if section.settings.avatar -%}
            <div class="main-author--author-avatar">
              <picture>
                {%- assign sizes = '100vw, 50vw' -%}
                {{- section.settings.avatar | image_url: width: section.settings.avatar.width | image_tag: loading: 'lazy', sizes: sizes, widths: '200,300,400,500,600,700,800,900,1000,1200,1400,1600,1800,2000,2200,2400,2600,2800,3000,3200' -}}
              </picture>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
  {%- if section.settings.subheading != blank or section.settings.heading != blank or section.settings.text != blank -%}
    <div class="main-author--author-content">
      <div class="container container--xl">
        <div class="main-author--author-container">
          <div class="main-author--author-bottom">
            {%- if section.settings.subheading != blank -%}
              <p class="main-author--author-subheading h5">{{ section.settings.subheading }}</p>
            {%- endif -%}
            {%- if section.settings.heading != blank -%}
              <p class="main-author--author-heading h4">{{ section.settings.heading }}</p>
            {%- endif -%}
            {%- if section.settings.text != blank -%}
              <div class="main-author--author-text prose">
                {{ section.settings.text }}
              </div>
            {%- endif -%}
          </div>
        </div>
      </div>
    </div>
  {%- endif -%}
  {%- if section.settings.image -%}
    <div class="main-author--author-image">
      <div class="container container--xl">
        <a href="{{ section.settings.image_link }}">
          <picture>
            {%- assign sizes = '100vw, 50vw' -%}
            {{- section.settings.image | image_url: width: section.settings.image.width | image_tag: loading: 'lazy', sizes: sizes, widths: '200,300,400,500,600,700,800,900,1000,1200,1400,1600,1800,2000,2200,2400,2600,2800,3000,3200' -}}
          </picture>
        </a>
      </div>
    </div>
  {%- endif -%}
  <div class="main-author--blog">
    <div class="container container--xl">
      <div class="section-stack">
        {%- if section.settings.blog_heading != blank -%}
          <h2 class="main-author--blog-heading h3">{{ section.settings.blog_heading }}</h2>
        {%- endif -%}
        <div class="main-author--blog-content">
          <blog-posts class="blog-post-list justify-center" {% if settings.stagger_blog_posts_apparition %}reveal-on-scroll="true"{% endif %}>
            {%- capture sizes -%}(max-width: 699px) 95vw, (max-width: 1149px) calc(100vw / 2), calc((80rem - (5rem * ({{ section.settings.blog.articles_count | default: 3 | at_most: 3 }} - 1) / 3){%- endcapture -%}
    
            {%- for article in section.settings.blog.articles limit: section.settings.posts_count -%}
              {%- render 'blog-post-card', article: article, blog: section.settings.blog, show_category: false, show_excerpt: section.settings.show_excerpt, show_read_more: section.settings.show_read_more, sizes: sizes -%}
            {%- else -%}
              {%- for i in (1..3) -%}
                {%- render 'blog-post-card', show_category: false, show_excerpt: section.settings.show_excerpt -%}
              {%- endfor -%}
            {%- endfor -%}
          </blog-posts>
        </div>
      </div>
    </div>
  </div>
</div>
{% schema %}
  {
    "name": "Author",
    "class": "shopify-section--main-author shopify-section--main-blog",
    "tag": "section",
    "settings": [
      {
        "type": "header",
        "content": "Author"
      },
      {
        "type": "image_picker",
        "id": "avatar",
        "label": "Avatar"
      },
      {
        "type": "text",
        "id": "name",
        "label": "Name",
        "default": "Henry Phan"
      },
      {
        "type": "text",
        "id": "instagram",
        "label": "Instagram"
      },
      {
        "type": "text",
        "id": "twitter",
        "label": "Twitter"
      },
      {
        "type": "inline_richtext",
        "id": "subheading",
        "label": "Subheading"
      },
      {
        "type": "inline_richtext",
        "id": "heading",
        "label": "Heading"
      },
      {
        "type": "richtext",
        "id": "text",
        "label": "Text"
      },
      {
        "type": "image_picker",
        "id": "image",
        "label": "Upload banner"
      },
      {
        "type": "url",
        "id": "image_link",
        "label": "Link banner"
      },
      {
        "type": "color",
        "id": "background_author",
        "label": "Background color",
        "default": "#EDF1F4"
      },
      {
        "type": "header",
        "content": "Blog"
      },
      {
        "type": "text",
        "id": "blog_heading",
        "label": "Heading",
        "default": "Latest from Henry Phan"
      },
      {
        "type": "blog",
        "id": "blog",
        "label": "t:sections.blog_posts.blocks.blog.blog"
      },
      {
        "type": "number",
        "id": "posts_count",
        "label": "t:sections.blog_posts.blocks.blog.posts_count",
        "default": 15
      },
      {
        "type": "checkbox",
        "id": "show_excerpt",
        "label": "t:global.blog.show_excerpt",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_read_more",
        "label": "t:global.blog.show_read_more",
        "default": true
      }
    ]
  }
{% endschema %}