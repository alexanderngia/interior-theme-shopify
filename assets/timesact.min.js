(function(){const G=function(c,v){const p=document.createElement("script");p.type="text/javascript";p.readyState?p.onreadystatechange=function(){if("loaded"===p.readyState||"complete"===p.readyState)p.onreadystatechange=null,v()}:p.onload=function(){v()};p.src=c;document.getElementsByTagName("head")[0].appendChild(p)};timesactScriptNew=async function(c){const v=document.createElement("style");v.id="TimesactCSS";v.innerHTML='.timesact-badge-ribbon span::before {\n                            content: "";\n                            position: absolute; left: 0px; top: 100%;\n                            z-index: -1;\n                            border-left: 3px solid #888888;\n                            border-right: 3px solid transparent;\n                            border-bottom: 3px solid transparent;\n                            border-top: 3px solid #888888;\n                        }\n                        .timesact-badge-ribbon span::after {\n                            content: "";\n                            position: absolute; right: 0px; top: 100%;\n                            z-index: -1;\n                            border-left: 3px solid transparent;\n                            border-right: 3px solid #888888;\n                            border-bottom: 3px solid transparent;\n                            border-top: 3px solid #888888;\n                        }\n                        .md-modal {\n                            position: fixed;\n                            top: 50%;\n                            left: 50%;\n                            width: 40%;\n                            height: auto;\n                            z-index: 999999999999;\n                            visibility: hidden;\n                            transform: translateX(-50%) translateY(-50%);\n                        }\n                        .md-content {\n                            background: #fff;\n                            position: relative;\n                            border-radius: 10px;\n                            margin: 0 auto;\n                        }\n                        .md-show {\n                            visibility: visible;\n                        }\n                        .md-show ~ .md-overlay {\n                            opacity: 1;\n                            visibility: visible;\n                            display: block;\n                        }\n                        .popup-container {\n                            min-height: 100%;\n                            display: none;\n                        }\n                        .md-overlay {\n                            position: fixed;\n                            width: 100%;\n                            height: 100%;\n                            visibility: hidden;\n                            top: 0;\n                            left: 0;\n                            z-index: 1000;\n                            opacity: 0;\n                            background: #c9c9c9c2;\n                            -webkit-transition: all 0.3s;\n                            -moz-transition: all 0.3s;\n                            transition: all 0.3s;\n                        }\n                        .md-body {\n                            text-align: center;\n                            padding-top: 10%;\n                            padding-bottom: 10%;\n                            font-family: "Roboto";\n                        }\n                        p.message {\n                              padding: 20px;\n                        }\n                        .md-close {\n                            background: #f70427;\n                            border: none;\n                            color: white;\n                            padding: 10px;\n                            border-radius: 4px;\n                            cursor: pointer;\n                        }\n                        @media screen and (max-width: 32em) {\n                            .md-modal { width: 80%; }\n                        }\n                        .timesact_bis_popup_overlay {\n                            position: fixed;\n                            top: 0;\n                            left: 0;\n                            z-index: 1040;\n                            visibility: hidden;\n                            width: 100vw;\n                            height: 100vh;\n                            background-color: #000;\n                            opacity: .5;\n                            display: block !important;\n                        }\n\n                        .timesact_bis_dialog {\n                            display: inline-table;\n                            position: fixed;\n                            top: 0;\n                            left: 0;\n                            z-index: 1050;\n                            visibility: hidden;\n                            width: 100%;\n                            height: 100%;\n                            overflow-x: hidden;\n                            overflow-y: auto;\n                            outline: 0;\n                        }\n                        \n                        .timesact_bis_popup_overlay_show,\n                        .timesact_bis_dialog_show {\n                            visibility: visible;\n                        }\n                        \n                        .timesact_bis_popup {\n                            z-index: 1000000;\n                            background: #fff;\n                            color: #000;\n                            margin: auto;\n                            pointer-events: none;\n                            max-width: 460px;\n                            width: 96%;\n                            top: 50%;\n                            left: 50%;\n                            transform: translate(-50%, -50%);\n                            position: fixed;\n                            border-radius: 10px;\n                            font-size: 14px;\n                            /*add dynamic value*/\n                        }\n\n                        .timesact_bis_popup_content {\n                            pointer-events: auto;\n                            position: relative\n                        }\n\n                        .timesact_bis_popup_body {\n                            padding: 20px;\n                            position: relative;\n                            display: flex;\n                            flex-direction: column;\n                            width: 100%;\n                            border-radius: .3rem\n                        }\n\n                        .timesact_bis_close_button {\n                            padding: 5px;\n                            background: 0 0;\n                            font-size: 1.4rem;\n                            font-weight: 700;\n                            line-height: 1;\n                            opacity: 1;\n                            cursor: pointer;\n                            outline: 0;\n                            border-radius: 0;\n                            position: absolute;\n                            top: 0;\n                            right: 0;\n                            border: 0\n                        }\n\n                        .timesact_bis_close_span {\n                            display: inline-block;\n                            height: 20px;\n                            width: 20px;\n                            color: #000;\n                            margin-top: 0;\n                        }\n\n                        .timesact_bis_heading {\n                            margin-bottom: 0;\n                            color: #000;\n                            /*dynamic value*/\n                            margin-top: 0;\n                            font-size: calc(2 * 1em);\n                            /*dynamic value*/\n                            font-weight: 700\n                        }\n\n                        .timesact_bis_desc {\n                            margin-bottom: 0;\n                            color: #000;\n                            /*dynamic value*/\n                            font-size: 14px;\n                            /*dynamic value*/\n                        }\n\n                        .timesact_bis_line {\n                            margin: 10px 0\n                        }\n\n                        .timesact_bis_form_field {\n                            margin-top: 10px\n                        }\n\n                        .timesact_bis_input {\n                            padding: 8px 15px;\n                            border: 1px solid #949494;\n                            background-color: #fff;\n                            color: #000;\n                            max-width: 100%;\n                            line-height: 1.2;\n                            width: 100%;\n                            outline: 0;\n                            border-radius: 10px;\n                            /*dynamic value*/\n                        }\n\n                        .timesact_bis_submit_button {\n                            width: 100%;\n                            outline: 0;\n                            border: 0;\n                            padding: 10px;\n                            display: flex;\n                            align-items: center;\n                            justify-content: center;\n                            background: #000;\n                            /*dynamic value*/\n                            color: #fff;\n                            /*dynamic value*/\n                            border-radius: 10px;\n                            /*dynamic value*/\n                            font-size: 14px;\n                            cursor: pointer;\n                        }\n\n                        .timesact_bis_submit_button--disabled {\n                            background: #ddd\n                        }\n\n                        .timesact_bis_loading_icon {\n                            width: 15px !important;\n                            height: 15px !important;\n                            margin-right: 5px !important;\n                        }\n\n                        .timesact_bis_loading_icon:after {\n                            content: " ";\n                            display: block;\n                            width: 15px !important;\n                            height: 15px !important;\n                            border-radius: 50%;\n                            border: 2px solid #fff;\n                            border-color: #fff transparent #fff transparent;\n                            animation: timesact-bis-loading 1.2s linear infinite\n                        }\n\n                        @keyframes timesact-bis-loading {\n                            0% {\n                                transform: rotate(0)\n                            }\n\n                            100% {\n                                transform: rotate(360deg)\n                            }\n                        }\n\n                        .timesact_bis_note {\n                            color: black;\n                            font-size: 80%;\n                            margin-bottom: 0\n                        }\n                        \n                        .timesact_bis_response {\n                            margin-bottom: 0;\n                        }\n\n                        .timesact_bis_message_success {\n                            width: 100%;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tfont-weight: 600;\n                            display: none;\n                            color: #28a745;\n                        }\n\n                        .timesact_bis_message_error {\n                            width: 100%;\n\t\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\t\tfont-weight: 600;\n                            display: none;\n                            color: red;\n                        }\n\n                        .timesact_powered_by {\n                            margin-top: 15px;\n                            left: 0;\n                            right: 0;\n                            text-align: center;\n                        }\n\n                        .timesact_powered_by a {\n                          text-decoration: none;\n                          color: #000 !important;\n                          font-weight: 700;\n                        }\n                        \n                        .timesact_bis_field_empty {\n                          border: 1px solid red;\n                        }\n                        \n                        .timesact_bis_message_show {\n                            display: block !important;\n                        }\n                        \n                        .timesact-button:after {\n                            content: none\n                        }\n\n                        .timesact-button:before {\n                            content: none\n                        }\n                        .timesact_bis_subscribe {\n                          font-size: 80%;\n                        }\n\n                        .timesact_sub #newsletter {\n                            height: 14px !important;\n                            width: 14px !important;\n                        }\n                        .timesact_sub {\n                            display: none;\n                        }\n\n                        #timesact_widget{\n                            width: 100%;\n                            text-align: left;\n                            margin-top: 17px;\n                            clear: both;\n                            max-width: 400px;\n                            \n                        }\n                        #timesact_widget .timesact_widget_wrapper {\n                            border: 1.5px solid #cccccc;\n                            // box-shadow: 0 0 0 1px #c4cdd5;\n                            border-radius: 5px;\n                            margin-bottom: 5px;\n                            margin-top: 10px;\n                        }\n                        \n                        #timesact_widget .timesact_option {\n                            display: flex;\n                            position: relative;\n                            padding: 16px 16px;\n                            flex-direction: column;\n                        }\n                        \n                        #timesact_widget .timesact_option:first-child {\n                            border-bottom: inherit;\n                        }\n                        #timesact_widget .timesact_option:first-child:last-child {\n                            border-bottom: none;\n                        }\n\n                        #timesact_widget .timesact_radio_label {\n                            display: flex !important;\n                            align-items: center;\n                            margin: 0;\n                            padding: 0;\n                            background: none;\n                        }\n                        \n                        .timesact_circle {\n                            position: relative;\n                        }\n                        \n                        .timesact_option input[type=radio]:focus + label .timesact_circle:before {\n                            height: 24px;\n                            width: 24px;\n                            border: 2px solid #3a3a3a;\n                            border-radius: 50%;\n                            flex-shrink: 0;\n                            content: \'\';\n                            position: absolute;\n                            left: 50%;\n                            top: 50%;\n                            transform: translate(-50%, -50%);\n                        }\n                        \n                        [name="selling_plan"] {\n                          position: absolute;\n                          opacity: 0;\n                        }\n\n                        #timesact_widget .timesact_circle {\n                            display: flex;\n                            height: 18px;\n                            width: 18px;\n                            border: 2px solid #3a3a3a;\n                            border-radius: 50%;\n                            margin-right: 10px;\n                            justify-content: center;\n                            align-items: center;\n                            flex-shrink: 0;\n                            \n                          }\n                      \n                        #timesact_widget .timesact_option input[type=radio]:checked + label .timesact_circle .timesact_dot {\n                            height: 10px;\n                            width: 10px;\n                            background-color: #3a3a3a;\n                            border-radius: 50%;\n                            flex-shrink: 0;\n                            \n                          }\n                          ';
document.getElementsByTagName("head")[0].appendChild(v);document.getElementsByTagName("body")[0].insertAdjacentHTML("afterbegin",'<div class="md-modal" id="mixed-modal"><div class="md-content"><div class="md-body"></div></div></div><div class="popup-container"><div class="column"><button class="md-trigger md-setperspective" data-modal="mixed-modal"></button></div></div><div class="md-overlay"></div>');document.getElementsByTagName("body")[0].insertAdjacentHTML("afterbegin",'<div class="timesact_bis_popup_overlay"></div>\n        <div aria-modal="true" aria-hidden="true" tabindex="-1" role="dialog" class="timesact_bis_dialog">\n            <div class="timesact_bis_popup">\n                <div class="timesact_bis_popup_content">\n                    <div class="timesact_bis_popup_body">\n                        <button type="button" data-dismiss="modal" aria-label="Close"\n                            class="timesact_bis_close_button">\n                            <span aria-hidden="true" class="timesact_bis_close_span">x</span>\n                        </button>\n                        <h3 class="timesact_bis_heading"></h3>\n                        <p class="timesact_bis_desc"></p>\n                        <p class="timesact_bis_response">\n                            <span class="timesact_bis_message_success"></span>\n                            <span class="timesact_bis_message_error"></span>\n                             \n                        </p>\n                        <hr class="timesact_bis_line">\n                        <div id="subscriptionForm">\n                            <div class="timesact_bis_form_field">\n                                <input id="timesact_bis_email" class="timesact_bis_input " type="email"\n                                placeholder="eg. username@example.com" name="email" value="">\n                            </div>\n                            <div class="timesact_bis_form_field">\n                                <button type="button" class="timesact_bis_submit_button ">\n                                    <span class="timesact_bis_loading_icon"></span>\n                                </button>\n                            </div>\n                            <div class="timesact_bis_form_field">\n                                <p class="timesact_bis_note"></p>\n                            </div>\n                            <div class="timesact_bis_form_field timesact_sub">\n                                <input type="checkbox" id="newsletter" name="newsletter" checked />\n                                <label class="timesact_bis_subscribe" for="newsletter"></label>\n                            </div>\n                        </div>\n                        <div class="timesact_powered_by">\n                            <a href="https://timesact.com" target="_blank" rel="noreferrer">\n                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M8 24l2.674-9h-9.674l16-15-2.674 9h8.674l-15 15zm-1.586-11h6.912l-1.326 4 5.739-6h-6.065l1.304-4-6.564 6z"></path></svg>\n                                <span>by Timesact</span>\n                            </a>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>');
const p=document.querySelector("#timesact_bis_email");document.querySelector("#newsletter");var B=!1,w=JSON.parse(window.sessionStorage.getItem("modal-queue")||null)||[];class E{add(a,b,d,e){"RIBBON"===b?(c(a).remove(`.timesact-badge-common-${e}`),c(a).remove(`.timesact-badge-ribbon-${e}`),c(a).append(`<div class='timesact-badge-ribbon timesact-badge-ribbon-${e}'><span class='timesact-badge-ribbon-span-${e}'><p>`+d+"</p></span></div>")):("ROUNDED"===b&&(c(a).remove(`.timesact-badge-common-${e}`),
c(a).remove(`.timesact-badge-ribbon-${e}`),c(a).append(`<div class='timesact-badge-common-${e}'><span class='timesact-badge-rounded-span-${e}'>`+d+"</span></div>")),"RECTANGLE"===b&&(c(a).remove(`.timesact-badge-common-${e}`),c(a).remove(`.timesact-badge-ribbon-${e}`),c(a).append(`<div class='timesact-badge-common-${e}'><span class='timesact-badge-rectangle-span-${e}'>`+d+"</span></div>")),"SQUARE"===b&&(c(a).remove(`.timesact-badge-common-${e}`),c(a).remove(`.timesact-badge-ribbon-${e}`),c(a).append(`<div class='timesact-badge-common-${e}'><span class='timesact-badge-square-span-${e}'>`+
d+"</span></div>")),"CIRCLE"===b&&(c(a).remove(`.timesact-badge-common-${e}`),c(a).remove(`.timesact-badge-ribbon-${e}`),c(a).append(`<div class='timesact-badge-common-${e}'><span class='timesact-badge-circle-span-${e}'>`+d+"</span></div>")))}getPositions(a,b,d,e){return{top:a&&e,bottom:!a&&e,left:!b&&d,right:b&&d}}getPositionsRibbon(a,b){return{top:a?"19px":"35px",right:b?"-20px":"-5px"}}getTransformRibbon(a,b){let d=45;a&&!b?d-=90:a||b?!a&&b&&(d-=270):d-=180;return{transform:`rotate(${d}deg)`,"-webkit-transform":`rotate(${d}deg)`}}getTransformRibbonText(a){return a?
{}:{transform:"rotate(180deg)","-webkit-transform":"rotate(180deg)"}}applyStyles(a,b){const d=a.top||void 0===a.top,e=a.right||void 0===a.right;c(".timesact-badge").css({position:"relative"});c(`.timesact-badge-ribbon-${b}`).css({position:"absolute",...this.getPositions(d,e,"-5px","-5px"),width:"75px",height:"75px","text-align":"right","z-index":"1",overflow:"hidden"});c(`.timesact-badge-ribbon-${b} span`).css({position:"absolute",...this.getPositionsRibbon(d,e),display:"block",width:"100px","font-size":`${a.fontSize}px`,
"font-weight":"bold",color:a.fontColor,"text-transform":"uppercase","text-align":"center","line-height":"20px","white-space":"nowrap",...this.getTransformRibbon(d,e)});c(`.timesact-badge-ribbon-${b} span p`).css({margin:0,...this.getTransformRibbonText(d),"font-size":`${a.fontSize}px`,color:a.fontColor});c(`.timesact-badge-ribbon-span-${b}`).css({"background-color":a.backgroundColor,"box-shadow":"0 3px 10px -5px rgba(0, 0, 0, 1)"});c(`.timesact-badge-rounded-span-${b}`).css({border:"1px solid transparent",
"border-radius":"4rem",display:"inline-block","letter-spacing":".1rem","line-height":"1",padding:"0.6rem 1.3rem","text-align":"center","background-color":a.backgroundColor,"border-color":a.backgroundColor,"font-size":`${a.fontSize}px`,color:a.fontColor,"font-weight":"bold","word-break":"break-word"});c(`.timesact-badge-rectangle-span-${b}`).css({display:"inline-block","min-width":"60px",padding:"0.6rem 1.3rem","letter-spacing":".1rem","line-height":"1","text-align":"center","font-size":`${a.fontSize}px`,
color:a.fontColor,"font-weight":"bold","word-break":"break-word","background-color":a.backgroundColor,"border-color":a.backgroundColor,border:"1px solid transparent"});c(`.timesact-badge-square-span-${b}`).css({display:"flex","align-items":"center","justify-content":"center","min-height":"60px","min-width":"60px",width:`${a.width}px`,height:`${a.width}px`,"letter-spacing":".1rem","line-height":"1","text-align":"center","font-size":`${a.fontSize}px`,color:a.fontColor,"font-weight":"bold","word-break":"break-word",
"background-color":a.backgroundColor,"border-color":a.backgroundColor,border:"1px solid transparent",overflow:"hidden"});c(`.timesact-badge-circle-span-${b}`).css({display:"flex","align-items":"center","justify-content":"center","min-height":"60px","min-width":"60px",width:`${a.width+28}px`,height:`${a.width+28}px`,padding:"14px","letter-spacing":".1rem","line-height":"1","text-align":"center","font-size":`${a.fontSize}px`,color:a.fontColor,"font-weight":"bold","word-break":"break-word","background-color":a.backgroundColor,
"border-color":a.backgroundColor,border:"1px solid transparent","border-radius":"50%",overflow:"hidden"});c(`.timesact-badge-common-${b}`).css({position:"absolute",...this.getPositions(d,e,"10px","10px"),display:"flex","flex-wrap":"wrap","z-index":"1"})}}class t{static updateStorage(){window.sessionStorage.setItem("modal-queue",JSON.stringify(w))}static pushQueue(a,b){w.find(d=>d.settings.id===a.id)||(w.push({settings:a,closeCb:b}),this.updateStorage())}static popQueue(){if(!(0>=w.length)){var a=
w.pop();this.updateStorage();return a}}static clearQueue(){w=[];this.updateStorage()}static showFirst(){if(!B){var a=this.popQueue();a&&(new t).display(a.settings,a.closeCb)}}display(a,b){if(B)return t.pushQueue(a,b);B=!0;c(".md-body").append("<h3>"+a.header+'</h3><p class="message">'+a.body+'</p><button class="md-close">'+a.button+'</button><p><input type="checkbox" id="md-stop" name="md-stop"><label for="md-stop">'+a.stop+"</label></p>");c("#mixed-modal").addClass("md-show");c(".md-close, .md-overlay").click(function(d){d.stopPropagation();
b instanceof Function&&b();B=!1;c("#mixed-modal").removeClass("md-show");c(".md-body").empty();t.showFirst()});c(".md-close").attr("style",`
				background: ${a.buttonBackgroundColor}!important;
				color: ${a.buttonFontColor}!important;`)}}class y{constructor(a,b,d,e){this.id=a;this.variants=b;this.title=d;this.sellingPlans=e?e.filter(f=>"timesact"==f.app_id).reduce((f,g)=>f.concat(g.selling_plans),[]):[]}setActiveVariant(a){this.variantId=a}setTimesactVariants(a){a&&a.variants?this.timesactVariants=a.variants:console.log("[ERROR 2002]: Product config is undefined.")}isPOEnabledForVariant(){return this.timesactVariants[this.variantId]&&this.timesactVariants[this.variantId].config?"isPOEnabled"in
this.timesactVariants[this.variantId]?this.timesactVariants[this.variantId].isPOEnabled:"ACTIVE"===this.timesactVariants[this.variantId].config.status||"NO_STOCK"===this.timesactVariants[this.variantId].config.status:!1}isISEnabledForVariant(){return this.timesactVariants[this.variantId]?"isISEnabled"in this.timesactVariants[this.variantId]?this.timesactVariants[this.variantId].isISEnabled:!1:!1}isBISEnabledForVariant(){if(!this.timesactVariants[this.variantId])return!1;window.ta.currentTimesactProductData.variantId=
this.variantId;window.ta.currentTimesactProductData.productName=this.timesactVariants[this.variantId].displayName;return this.timesactVariants[this.variantId].isBISEnabled}isCSEnabledForVariant(){return this.timesactVariants[this.variantId]?this.timesactVariants[this.variantId].isCSEnabled:!1}getVariantSettings(a,b,d){if(!this.timesactVariants[this.variantId].config.settingsTemplate){a=a[b];if(!this.hasCustomSettings())return a;b=this.timesactVariants[this.variantId].settings;return{button:{...a.button,
name:b.buttonName||a.button.name},message:{...a.message,type:b.messageType||a.message.type,value:b.messageValue||a.message.value},cart:{...a.cart,labelText:{key:b.cartLabelTextKey||a.cart.labelText.key,value:b.cartLabelTextValue||a.cart.labelText.value}},badge:a.badge}}return"PO"===d?this.timesactVariants[this.variantId].config.settingsTemplate in a?a[this.timesactVariants[this.variantId].config.settingsTemplate]:a[b]:"BIS"===d?this.timesactVariants[this.variantId].configBIS.settingsTemplate in a?
a[this.timesactVariants[this.variantId].configBIS.settingsTemplate]:a[b]:"CS"===d?this.timesactVariants[this.variantId].configCS.settingsTemplate in a?a[this.timesactVariants[this.variantId].configCS.settingsTemplate]:a[b]:"IS"===d?this.timesactVariants[this.variantId].configIS.settingsTemplate in a?a[this.timesactVariants[this.variantId].configIS.settingsTemplate]:a[b]:a[b]}hasCustomSettings(){return this.timesactVariants[this.variantId].settings?"CUSTOM"===this.timesactVariants[this.variantId].settings.type:
!1}isVariantOutOfStock(){if(!this.timesactVariants[this.variantId])return!1;const a=this.timesactVariants[this.variantId];return 0<a.quantity?!1:"DENY"===a.inventoryPolicy?!0:!1}}class H{constructor(){}initTimesact(){if("undefined"==typeof window.ta){var a=localStorage.getItem("products")?JSON.parse(localStorage.getItem("products")):{},b=localStorage.getItem("settings")?JSON.parse(localStorage.getItem("settings")):void 0,d=this.computeLastProductUpdate(a),e=localStorage.getItem("lastSettingsUpdate")?
JSON.parse(localStorage.getItem("lastSettingsUpdate")):0;window.ta={products:a,settings:b,lastProductUpdate:d,lastSettingsUpdate:e,cart:{showMixedCartAlert:sessionStorage.getItem("showCartMixedAlert")?JSON.parse(sessionStorage.getItem("showCartMixedAlert")):!0},quickView:{selectors:{button:".quick-add__submit, .productitem--action-qs, .boost-pfs-quickview-btn, .cc-quick-buy-btn, .button--quick-shop, .sca-qv-button, .quick-view-btn, .bc-quickview-btn-wrapper, .sca-qv-cartbtn, .js-quick-shop-link, .searchit-quick-view-button, .quick-view, .js-quickbuy-button, .quick-product__btn, .product-card-interaction-quickshop, .product-modal, .productitem--action button, a.quickview, .overlay, a.quickview, .has-quick-view .btn .v-b, .shop-now-button, .quick-buy, .quick_shop, a[data-action='show-product'], .trigger-quick-view, .quickview-button, .quick_view, .qview-button, button.btn-addToCart:last, .quick-shop, .fancybox.ajax, .quick-add-button-variants, .product-thumbnail__quickshop-button, .js-quickView-button",
form:".product__form:visible,\n\t\t\t\t\t\t\t#sca-qv-add-item-form:visible,\n\t\t\t\t\t\t\t.shopify-product-form:visible,\n\t\t\t\t\t\t\t.bc-modal-wrapper:visible\n\t\t\t\t\t\t\t#bc-quickview-cart-form:visible,\n\t\t\t\t\t\t\t.product_form:visible,\n\t\t\t\t\t\t\t.searchit-quick-view-form-wrapper\n\t\t\t\t\t\t\tform:visible, .product-form:visible,\n\t\t\t\t\t\t\t.quick-buy__product-form:visible,\n\t\t\t\t\t\t\t.product-single__form:visible,\n\t\t\t\t\t\t\tform[action='/cart/add']:visible,\n\t\t\t\t\t\t\t#AddToCartForm:visible,\n\t\t\t\t\t\t\tform.module:visible,\n\t\t\t\t\t\t\t#add-to-cart-quickview-form:visible",
addToCartButton:"[type=submit]:visible:first span, .sca-qv-cartbtn:visible, #addToCart:visible, #bc-quickview-cart-btn:visible, .add_to_cart:visible, #searchit-quick-view-add-to-cart:visible, .product-form__cart-submit:visible, .quickbuy__submit:visible, .add-to-cart:visible, .product-submit:visible, .add:visible, .product-form--atc-button:visible, input.action-button.submit:visible, .addto.cart.sliding-cart:visible, #AddToCart:visible, .product-add:visible, .add-to-cart:visible, .product__submit__add:visible, .product-add-to-cart:visible, #add-to-cart:visible, .product-submit.action-button.product-submit, .product-form__add-button:visible, .add-to-cart-btn:visible, .qview-btn-addtocart:visible, button.btn-addToCart:last, .button--add-to-cart:visible",
variant:"#sca-qv-variant-options select.single-option-selector, .bc-quickview-single-option-selector, .searchit-option-selector-wrapper select, .qview-variants select, select:visible, .radio-wrapper fieldset, input[type='radio']",quantity:"[name='quantity']",quickviewModalContainer:".quick-add-modal, .theme-modal--quickbuy, .quickview-product .product-quickview:visible, .sca-fancybox-wrap:visible, .mfp-container:visible, .bc-modal-wrapper:visible, .quick-shop:visible, .searchit-modal:visible, #colorbox:visible, .modal--quick-shop:visible, .quickshop:visible, .fancybox-wrap:visible, .fancybox-container:visible, .modal-content:visible, .product-quick-view, section.quick-view, #ShopNowContainer, #ProductScreens, .product.preview, .modal__inner__wrapper:visible, .halo-modal-content:visible, #quickView:visible, .quickshop-content:visible, .modal__inner:visible, .quick-view .content:visible, .qview-product:visible"}}}}}computeLastProductUpdate(a){let b=
parseInt((new Date).getTime()/1E3);for(let d of Object.values(a))d.lastUpdate&&d.lastUpdate<b?b=d.lastUpdate:d.lastUpdate||(b=1);return b}isProductPage(){return-1<window.location.href.indexOf("/products/")||-1<window.location.href.indexOf("/products_preview?")}isCollectionPage(){return-1<window.location.href.indexOf("/collections/")}isSearchPage(){return-1<window.location.href.indexOf("/search?")}isPagesPage(){return-1<window.location.href.indexOf("/pages/")}isHomePage(){return"/"===document.location.pathname}isCartPage(){return-1<
window.location.pathname.indexOf("/cart")}initQuickView(a){this.shopData=a;this.createQuickViewButtonListener()}createQuickViewButtonListener(){var a=this;c(window.ta.quickView.selectors.button).click(function(b){if(b=a.getProductHandle(b.currentTarget)){b=a.getProductPageJsURL(b);var d;c.getJSON(b.concat(".js"),function(e){console.log(e);d=new y(e.id,e.variants,e.title,e.selling_plan_groups)}).done(function(){(new z(a.shopData,d)).run(!0)}).fail(function(){console.log("[Error 1001]: Product could not be fetched.")})}})}getProductHandle(a){return c(a).data("product-url").split("/").pop()}getProductPageJsURL(a){return"https://"+
window.location.hostname+"/products/"+a}sleep(a){return new Promise(function(b){setTimeout(b,a)})}cleanupModal(){c(window.ta.quickView.selectors.quickviewModalContainer).find("#preorder-label").remove();c(window.ta.quickView.selectors.quickviewModalContainer).find(".timesact-preorder-description").remove()}}class I{extractVariantId(a,b){var d=window.location.search.match(/variant=([0-9]+)/);if(null!=d)return d[1];const e="radio"===c(b).find("select[name='id'], input[name='id'], select[name='id[]'], input[name='id[]']").attr("type")?
c(b).find("input[name='id']:checked, input[name='id[]']:checked").val():c(b).find("select[name='id'], input[name='id'], select[name='id[]'], input[name='id[]']").val();return a.some(f=>f.id.toString()===e)?e:a[0].id}}class C{static createListeners(){c(".timesact_bis_input").focusout(function(){const a=c(".timesact_bis_input");a.val()&&a.hasClass("timesact_bis_field_empty")&&(a.removeClass("timesact_bis_field_empty"),c(".timesact_bis_message_success").removeClass("timesact_bis_message_show"),c(".timesact_bis_message_error").removeClass("timesact_bis_message_show"))});
c(".timesact_bis_close_button").click(C.hidenBisModal);c(".timesact_bis_submit_button").click(C.createSubscription)}static displayBisModal(){const {defaultSettings:a,productId:b,productVariants:d,variantId:e}=window.ta.currentTimesactProductData;var f=new y(b,d);f.setActiveVariant(e);f.setTimesactVariants({variants:d});({form:f}=f.getVariantSettings(window.ta.settings,a.templates.BIS,"BIS"));c("h3.timesact_bis_heading").attr("style",`color: ${f.headingFontColor} !important;`);c("#subscriptionForm .timesact_bis_submit_button").attr("style",
`
				background: ${f.buttonBackgroundColor} !important;
				color: ${f.buttonFontColor} !important;
				border-radius: ${f.fieldsBorderRadius}px !important;
				font-size: ${f.fontSize}px !important;`);c("#subscriptionForm .timesact_bis_input").attr("style",`
				border-radius: ${f.fieldsBorderRadius}px !important;
				font-size: ${f.fontSize}px !important;`);c(".timesact_bis_popup").attr("style",`border-radius: ${f.popupBorderRadius}px !important;`);c(".timesact_bis_desc, .timesact_bis_note, .timesact_bis_subscribe").attr("style",`color: ${f.textFontColor} !important;`);c(".timesact_bis_email").attr("style",`border-radius: ${f.fieldsBorderRadius}px !important;`);c(".timesact_bis_heading").text(f.heading);c(".timesact_bis_desc").text(f.description);c(".timesact_bis_submit_button").text(f.buttonName);c(".timesact_bis_form_field .timesact_bis_note").text(f.note);
c(".timesact_bis_form_field .timesact_bis_subscribe").text(f.messageNewsletter);c(".timesact_bis_message_success").text(f.messageSuccess);c(".timesact_bis_message_error").text(f.messageError);f.isNewsletterEnabled&&c(".timesact_sub").attr("style","display: inline-flex !important;");c(".timesact_bis_popup_overlay").addClass("timesact_bis_popup_overlay_show");c(".timesact_bis_dialog").addClass("timesact_bis_dialog_show");f.isBrandEnabled||c(".timesact_powered_by").hide()}static hidenBisModal(){c(".timesact_bis_popup_overlay").removeClass("timesact_bis_popup_overlay_show");
c(".timesact_bis_dialog").removeClass("timesact_bis_dialog_show");c(".timesact_bis_message_success").removeClass("timesact_bis_message_show").html("");c(".timesact_bis_message_error").removeClass("timesact_bis_message_show").html("");p.value=""}static async createSubscription(){const a=c(".timesact_bis_message_success"),b=c(".timesact_bis_message_error");var d=c(".timesact_bis_input");p.value?(d={type:"EMAIL",status:"PENDING",value:p.value,productId:window.ta.currentTimesactProductData.productId,
variantId:window.ta.currentTimesactProductData.variantId,productName:window.ta.currentTimesactProductData.productName,isSubNewsletter:c("#newsletter").is(":checked")},(d=await x.createSubscription(d))&&b.removeClass("timesact_bis_message_show")&&a.addClass("timesact_bis_message_show")&&c("#timesact_bis_email").val(""),!d&&a.removeClass("timesact_bis_message_show")&&b.addClass("timesact_bis_message_show")):d.addClass("timesact_bis_field_empty")}}class A{constructor(a,b){this.addToCartButtonSelector=
a;this.hasInsideSpan="span"===c(this.addToCartButtonSelector).first().prop("tagName")?.toLowerCase();"timesact-button-po"===b||"timesact-button-is"===b?this.button=a:(this.button=c(`<button type="button" class="${b}" />`).attr("style","display: none !important;"),this.hasInsideSpan?c(this.addToCartButtonSelector).first().parent().after(this.button):c(this.addToCartButtonSelector).first().after(this.button))}showPO(a){this.hasInsideSpan?c(this.button).parent().show():c(this.button).show();c(this.button).val(a.button.name);
c(this.button).text(a.button.name);c(this.button).prop("disabled",!1);"DEFAULT"!==a.button.type&&(this.hasInsideSpan?c(this.button).first().parent().addClass("timesact-button"):c(this.button).first().addClass("timesact-button"),this.applyStyles(a.button.style,"timesact-button"))}showBIS(a){c(this.button).text(a.button.name);this.applyStyles(a.button.style,"timesact-button-bis");c(this.button).click(C.displayBisModal);c(this.button).show();this.hasInsideSpan?c(this.addToCartButtonSelector).first().parent().attr("style",
"display: none !important;"):c(this.addToCartButtonSelector).first().attr("style","display: none !important;")}showCS(a){c(this.button).text(a.button.name);this.button.prop("disabled",!0);this.applyStyles(a.button.style,"timesact-button-cs");c(this.button).show();this.hasInsideSpan?c(this.addToCartButtonSelector).first().parent().attr("style","display: none !important;"):c(this.addToCartButtonSelector).first().attr("style","display: none !important;")}showAddToCart(){this.hasInsideSpan?(c(this.addToCartButtonSelector).first().parent().show(),
c(this.addToCartButtonSelector).first().parent().removeClass("timesact-button"),c(this.addToCartButtonSelector).first().parent().removeAttr("style")):(c(this.addToCartButtonSelector).first().show(),c(this.addToCartButtonSelector).first().removeClass("timesact-button"),c(this.addToCartButtonSelector).first().removeAttr("style"));c(this.addToCartButtonSelector).val(this.addToCartText);c(this.addToCartButtonSelector).text(this.addToCartText);c(this.addToCartButtonSelector).prop("disabled",!1)}showOutOfStock(){this.hasInsideSpan?
(c(this.addToCartButtonSelector).first().parent().show(),c(this.addToCartButtonSelector).first().parent().removeClass("timesact-button"),c(this.addToCartButtonSelector).first().parent().removeAttr("style")):(c(this.addToCartButtonSelector).first().show(),c(this.addToCartButtonSelector).first().removeClass("timesact-button"),c(this.addToCartButtonSelector).first().removeAttr("style"));c(this.addToCartButtonSelector).val(this.soldOutText);c(this.addToCartButtonSelector).text(this.soldOutText);c(this.addToCartButtonSelector).prop("disabled",
!0)}setAddToCartText(a){this.addToCartText=a||c(this.addToCartButtonSelector).text()}setSoldOutText(a){this.soldOutText=a}hide(){c(this.button).hide()}disable(){this.hasInsideSpan?c(this.button).parent().prop("disabled",!0):c(this.button).prop("disabled",!0);c(this.addToCartButtonSelector).prop("disabled",!0)}confirmButtonExists(){return 0<c(this.button).closest("body").length}identifyButton(a){this.button=a.formSelector.find(a.ids.addToCartButton)}applyStyles(a,b){c(`.${b}`).attr("style",`
                width: ${a.width}${"PERCENT"===a.widthType?"%":"px"} !important;
                height: ${a.height}${"PERCENT"===a.heightType?"%":"px"} !important;
                background-color: ${a.backgroundColor} !important;
                border: ${a.borderWidth}px solid ${a.borderColor} !important;
                border-color: ${a.borderColor} !important;
                border-radius: ${a.borderRadius}px !important;
                border-width: ${a.borderWidth}px !important;
                color: ${a.fontColor} !important;
                font-size: ${a.fontSize}px !important;
                font-style: ${a.fontStyle} !important;
                font-weight: ${a.fontWeight} !important;
                margin-bottom: 10px !important;
                margin-top: 10px !important;
                cursor: pointer;`);if("PERCENT"===a.heightType){const d=c(`.${b}`).parent().height();c(`.${b}`).height(`${d*a.height/100}px`)}}removeCartAlertListener(){c(this.button).parent().off("click",this.cartAlertModalClickHandler)}closeCartAlertModal(a,b={}){window.sessionStorage.setItem("showCartAlert",JSON.stringify({...b,[a.id]:{dismiss:c("#md-stop").is(":checked")}}));c("#md-stop").is(":checked")&&this.removeCartAlertListener()}addCartAlertListener(a,b){const d=JSON.parse(window.sessionStorage.getItem("showCartAlert")||
null)||{},e=JSON.parse(window.sessionStorage.getItem("closedModals")||null)||[],f=`${a.type}-${b.id}-${b.variantId}`;a.cart.alert&&a.cart.alert.isEnabled&&!0===a.cart.alert.onButtonClick&&!d[f]?.dismiss&&!e.includes(f)&&(this.cartAlertModalClickHandler=()=>{const g={...a.cart.alert,id:f};return(new t).display(g,()=>this.closeCartAlertModal(g,d))},c(this.button).parent().on("click",this.cartAlertModalClickHandler))}}class D{constructor(a,b){this.timerSelector=a;this.utils={delims:[60,60,24,365]};this.components=
{timer:null,timerElements:[null,null,null,null]};this.componentsClasses={timer:`timer-container-${b}`,title:"timer-title",subheading:"timer-subheading",timerValueContainer:"timer-value-container",timerLabels:"timer-value-labels",timerValues:"timer-values"}}setTimerInfo({content:a,isEnabled:b,placement:d,style:e,productConfig:f}){this.title=a.title;this.subheading=a.subheading;this.labels=a.labels;this.dates=a?.dates;this.placement=d;this.isEnabled=b||!1;this.style=e||null;this.onceItEnds=a.onceItEnds;
this.productConfig=f}show(){if(!this.isEnable())return!1;this.createTimer();"BELOW"===this.placement?c(this.timerSelector).after(this.components.timer):c(this.timerSelector).before(this.components.timer);this.applyStyles();this.countdown()}hide(){this.stop();c(`.${this.componentsClasses.timer}`).remove()}createTitle(){return c(`<h2 class="${this.componentsClasses.title}">${this.title}</h2>`)}createSubheading(){return c(`<p class="${this.componentsClasses.subheading}">${this.subheading}</p>`)}createTimerLabels(){const a=
[],b=["days","hours","mins","secs"];for(const d of b)a.push(c(`<div class="${this.componentsClasses.timerLabels}">${this.labels[d]}</div>`));return a}createTimerValues(){const a=[];"00 : 00 : 00 : 00".split(" ").forEach(b=>a.push(c(`<div translate="no" class="${this.componentsClasses.timerValues}">${b}</div>`)));this.components.timerElements=a.filter((b,d)=>0===d%2);return a}createTimerValueContainer(){const a=c(`<div class="${this.componentsClasses.timerValueContainer}"></div>`);a.append(...this.createTimerValues(),
...this.createTimerLabels());return a}createTimer(){const a=c(`<div class="${this.componentsClasses.timer}"></div>`);a.append(this.createTitle(),this.createSubheading(),this.createTimerValueContainer());return this.components.timer=a}getEndDateFromPeriod(a,b){const d=parseInt(Date.now()/1E3);b=86400*parseInt(b);switch(a){case "MONTH":return d+30*b;case "WEEK":return d+7*b;default:return d+b}}getActualEndDate(){switch(this.dates.endAt){case "END_DATE":return this.productConfig.hasEndDate&&this.productConfig.endDate||
parseInt(Date.now()/1E3);case "SHIPPING_DATE":switch(this.productConfig.shippingDate.type){case "PERIOD":return this.getEndDateFromPeriod(this.productConfig.shippingDate.periodType,this.productConfig.shippingDate.periodValue);case "INTERVAL":return this.getEndDateFromPeriod(this.productConfig.shippingDate.periodEnd.type,this.productConfig.shippingDate.periodEnd.value);default:return this.productConfig.shippingDate.date||parseInt(Date.now()/1E3)}default:switch(this.dates.type){case "FIXED":return parseInt(Date.now()/
1E3)+60*parseInt(this.dates.minutes);default:return this.dates.endDate._seconds}}}isEnable(){return this.getActualEndDate()<Date.now()/1E3?!1:this.dates?.startDate?this.isEnabled&&this.dates.startDate._seconds<Date.now()/1E3:this.isEnabled}make2Digit(a){return`${10>a?"0":""}${a}`}handleOnEnd(){const {value:a,customTitle:b}=this.onceItEnds;switch(a){case "unpublish-timer":return this.hide();case "repeat-the-countdown":if("FIXED"!==this.dates.type||this.dates.endAt&&"DATE"!==this.dates.endAt)break;
this.dates.endDate._seconds=this.getActualEndDate();return setTimeout(()=>this.countdown(),500);case "show-custom-title":return this.components.timer.html(b)}}calculateRelativeDatetime(a,b){if("number"!==typeof a||"number"!==typeof b||0>=a-b)return["00","00","00","00"];const d=[0,0,0,0];a=Math.abs(a-b);for(b=0;b<this.utils.delims.length;b++){const e=this.utils.delims[b];d[b]=Math.floor(a%e);if(a>=e)a/=e;else break}return d.map(e=>this.make2Digit(e)).reverse()}countdown(){let a=[],b=parseInt(Date.now()/
1E3);const d=this.getActualEndDate();this.timerId=setInterval(()=>{if(d<b)return this.handleOnEnd(),this.stop();const e=this.calculateRelativeDatetime(d,b);this.components.timerElements.forEach((f,g)=>{a[g]!==e[g]&&f.text(e[g])});a=e;b+=1},1E3)}stop(){clearInterval(this.timerId)}applyStyles(){c(`.${this.componentsClasses.timer} *`).css({margin:0,padding:0,"box-sizing":"border-box"});c(`.${this.componentsClasses.timer}`).css({"max-width":"420px","min-width":"260px",display:"flex","flex-flow":"column",
"text-align":"center","-webkit-box-align":"center","align-items":"center",overflow:"hidden","margin-bottom":`${this.style.container?.marginBottom}px`,"margin-top":`${this.style.container?.marginTop}px`,"padding-bottom":`${this.style.container?.paddingBottom}px`,"padding-top":`${this.style.container?.paddingTop}px`,"background-color":this.style.container?.background,"border-color":this.style.container?.borderColor,"border-radius":`${this.style.container?.borderRadius}px`,"border-width":`${this.style.container?.borderSize}px`,
"border-style":"solid"});c(`.${this.componentsClasses.title}`).css({"font-weight":"bold",color:this.style.title?.color,"font-size":`${this.style.title?.fontSize}px`});c(`.${this.componentsClasses.subheading}`).css({"padding-top":"2px","line-height":"1.5",color:this.style.subheading?.color,"font-size":`${this.style.subheading?.fontSize}px`});c(`.${this.componentsClasses.timerValueContainer}`).css({display:"grid","grid-template-columns":"1fr 10px 1fr 10px 1fr 10px 1fr",gap:"6px 2px","place-items":"center",
"align-items":"flex-start"});c(`.${this.componentsClasses.timerValues}`).css({"font-weight":"bold","font-feature-settings":"tnum","font-variant-numeric":"tabular-nums","letter-spacing":"-2px","line-height":"1",color:this.style.timer?.color,"font-size":`${this.style.timer?.fontSize}px`});c(`.${this.componentsClasses.timerLabels}`).css({"max-width":"100px","white-space":"pre-line","grid-column":"span 2 / auto","text-align":"center","padding-right":"10px","line-height":"1",color:this.style.labels?.color,
"font-size":`${this.style.labels?.fontSize}px`});c(`.${this.componentsClasses.timerLabels}:last-of-type`).css({"grid-column":"span 1 / auto","padding-right":0})}}class u{constructor(a){this.locale=a}addStylePreorderMessage(a,b){c(`.timesact-${b}-description`).css({"font-size":`${a.fontSize}px`,color:a.fontColor,"text-align":a.textAlign,"font-weight":a.fontWeight,"font-style":a.fontStyle,"margin-bottom":"10px","margin-top":"10px"})}populateDynamicValues(a,b,d,e){b=b.replace("{{preorderQuantity}}",
this.getQuantity(a,d,e));b=b.replace("{{shippingDate}}",this.getShippingDate(a[e].shippingDate,d));b=b.replace("{{daysLeftUntilShippingDate}}",this.getDaysLeftUntilShippingDate(a[e].shippingDate,d));return b=b.replace("{{daysLeftUntilPreorderEndDate}}",this.getDaysLeftUntilEndDate(a[e],d))}getQuantity(a,b,d){return"STOCK3"==a[d].stock.option?a.quantity:a[d].stock.hasUnlimitedQuantity?b?"VARIABLE_NOT_SET":'<span style="color:red;">VARIABLE_NOT_SET</span>':a[d].stock.quantity}getShippingDate(a,b){if(!a||
"NO_SET"===a.type)return b?"VARIABLE_NOT_SET":'<span style="color:red;">VARIABLE_NOT_SET</span>';if("DATE"===a.type)return(new Date(1E3*a.date)).toLocaleDateString(this.locale,{day:"numeric",month:"long",year:"numeric"});if("PERIOD"===a.type){b=1;switch(a.periodType){case "DAY":b=a.periodValue;break;case "WEEK":b=7*a.periodValue;break;case "MONTH":b=30*a.periodValue}a=new Date;a.setDate(a.getDate()+b);return a.toLocaleDateString(this.locale,{day:"numeric",month:"long",year:"numeric"})}if("INTERVAL"===
a.type){var d=1;b=1;switch(a.periodStart.type){case "DAY":d=a.periodStart.value;break;case "WEEK":d=7*a.periodStart.value;break;case "MONTH":d=30*a.periodStart.value}switch(a.periodEnd.type){case "DAY":b=a.periodEnd.value;break;case "WEEK":b=7*a.periodEnd.value;break;case "MONTH":b=30*a.periodEnd.value}a=new Date;a.setDate(a.getDate()+d);d=new Date;d.setDate(d.getDate()+b);return a.toLocaleDateString(this.locale,{day:"numeric",month:"long",year:"numeric"})+" - "+d.toLocaleDateString(this.locale,{day:"numeric",
month:"long",year:"numeric"})}}getDaysLeftUntilShippingDate(a,b){if(!a||"NO_SET"===a.type)return b?"VARIABLE_NOT_SET":'<span style="color:red;">VARIABLE_NOT_SET</span>';b=new Date;if("DATE"===a.type)return Math.ceil(((new Date(1E3*a.date)).getTime()-b.getTime())/864E5);if("PERIOD"===a.type)switch(a.periodType){case "DAY":return a.periodValue;case "WEEK":return 7*a.periodValue;case "MONTH":return 30*a.periodValue;default:return 1}if("INTERVAL"===a.type){var d=b=1;switch(a.periodStart.type){case "DAY":b=
a.periodStart.value;break;case "WEEK":b=7*a.periodStart.value;break;case "MONTH":b=30*a.periodStart.value}switch(a.periodEnd.type){case "DAY":d=a.periodEnd.value;break;case "WEEK":d=7*a.periodEnd.value;break;case "MONTH":d=30*a.periodEnd.value}return b+" - "+d}}getDaysLeftUntilEndDate(a,b){if(!a.hasEndDate)return b?"VARIABLE_NOT_SET":'<span style="color:red;">VARIABLE_NOT_SET</span>';b=new Date;return Math.ceil(((new Date(1E3*a.endDate)).getTime()-b.getTime())/864E5)}}class J{constructor(a,b,d,e){this.selectors=
a;this.product=b;this.settings=window.ta.settings;this.defaultSettingIds=d;this.buttonPO=new A(this.selectors.buttonSelector,"timesact-button-po");this.buttonIS=new A(this.selectors.buttonSelector,"timesact-button-is");this.buttonBIS=new A(this.selectors.buttonSelector,"timesact-button-bis");this.buttonCS=new A(this.selectors.buttonSelector,"timesact-button-cs");this.timerPO=new D(this.selectors.timerSelector,"timesact-timer-po");this.timerIS=new D(this.selectors.timerSelector,"timesact-timer-is");
this.timerBIS=new D(this.selectors.timerSelector,"timesact-timer-bis");this.timerCS=new D(this.selectors.timerSelector,"timesact-timer-cs");this.uuid=Math.floor(1E8+9E8*Math.random());c(this.selectors.variantSelector).addClass("timesact-variant-picker-"+this.uuid);this.shop=e}init(){this.createWidget();(new K).initVariantEventListener(this)}createWidget(){const a=this.product.timesactVariants[this.product.variantId];if(this.product.isBISEnabledForVariant()){var b=this.product.getVariantSettings(this.settings,
this.defaultSettingIds.BIS,"BIS");this.buttonBIS.setAddToCartText(b.button.addToCartText);this.buttonBIS.setSoldOutText(b.button.soldOutText);"ACTIVE"===a.configBIS.status&&(this.buttonBIS.showBIS(b),this.addCommonElements(b,a))}if(this.product.isISEnabledForVariant()&&(b=this.product.getVariantSettings(this.settings,this.defaultSettingIds.IS,"IS"),this.buttonIS.setAddToCartText(b.button.addToCartText),this.buttonIS.setSoldOutText(b.button.soldOutText),"NO_STOCK"===a.configIS.status&&(this.buttonIS.showOutOfStock(),
c(this.selectors.formSelector).find(".shopify-payment-button").hide()),"ACTIVE"===a.configIS.status)){this.buttonIS.confirmButtonExists()||(this.buttonIS.identifyButton(this.selectors),this.selectors.buttonSelector=c(this.selectors.formSelector).find(this.selectors.ids.addToCartButton));this.buttonIS.showPO(b);this.buttonIS.addCartAlertListener(b,this.product);this.shop.isDisabledIS&&this.buttonIS.disable();this.addCommonElements(b,a);var d=new u(b.message.locale||"en-US"),e=d.populateDynamicValues(a,
b.cart.labelText.key,!0,"configIS");d=d.populateDynamicValues(a,b.cart.labelText.value,!0,"configIS");("undefined"===typeof b.cart.labelText.isEnabled||b.cart.labelText.isEnabled)&&this.showPreorderLineItemProperty(e,d)}this.product.isPOEnabledForVariant()&&(b=this.product.getVariantSettings(this.settings,this.defaultSettingIds.PO,"PO"),this.buttonPO.setAddToCartText(b.button.addToCartText),this.buttonPO.setSoldOutText(b.button.soldOutText),"NO_STOCK"===a.config.status&&(this.buttonPO.showOutOfStock(),
c(this.selectors.formSelector).find(".shopify-payment-button").hide()),"ACTIVE"===a.config.status&&(this.buttonPO.confirmButtonExists()||(this.buttonPO.identifyButton(this.selectors),this.selectors.buttonSelector=c(this.selectors.formSelector).find(this.selectors.ids.addToCartButton)),this.shop.hasSellingPlanEnabled&&0<this.product.sellingPlans.length&&!this.shop.isSellingPlanUIDisabled&&this.addSellingPlan(this.product.sellingPlans,b,a),this.buttonPO.showPO(b),this.buttonPO.addCartAlertListener(b,
this.product),this.shop.isDisabled&&this.buttonPO.disable(),this.addCommonElements(b,a),d=new u(b.message.locale||"en-US"),e=d.populateDynamicValues(a,b.cart.labelText.key,!0,"config"),d=d.populateDynamicValues(a,b.cart.labelText.value,!0,"config"),("undefined"===typeof b.cart.labelText.isEnabled||b.cart.labelText.isEnabled)&&this.showPreorderLineItemProperty(e,d),a.config.stock.hasUnlimitedQuantity||this.addQuantityListener(a.config.stock.quantity)));this.product.isCSEnabledForVariant()&&(b=this.product.getVariantSettings(this.settings,
this.defaultSettingIds.CS,"CS"),this.buttonCS.setAddToCartText(b.button.addToCartText),this.buttonCS.setSoldOutText(b.button.soldOutText),"ACTIVE"===a.configCS.status&&(this.buttonCS.showCS(b),this.addCommonElements(b,a)))}resetDefault(){this.buttonBIS.hide();this.buttonCS.hide();this.timerPO.hide();this.timerIS.hide();this.timerBIS.hide();this.timerCS.hide();this.buttonPO.removeCartAlertListener();this.buttonIS.removeCartAlertListener();this.buttonPO.confirmButtonExists()&&this.buttonIS.confirmButtonExists()||
(this.buttonPO.identifyButton(this.selectors),this.buttonIS.identifyButton(this.selectors),this.selectors.buttonSelector=c(this.selectors.formSelector).find(this.selectors.ids.addToCartButton));this.product.isVariantOutOfStock()?(this.buttonPO.showOutOfStock(),c(this.selectors.formSelector).find(".shopify-payment-button").hide()):(this.buttonPO.showAddToCart(),c(this.selectors.formSelector).find(".shopify-payment-button").show());this.removePreorderLineItemProperty();this.removePreorderMessage();
this.removePreorderBadge();this.removePreorderQuantity();this.removeSellingPlanWidget();this.selectors.hideProductElements&&this.addHiddenElements()}addSellingPlan(a,b,d){if(d.config.sellingPlan)if(a=a.find(f=>String(f.id)===d.config.sellingPlan)){"FULL_PAYMENT"===a.options[0].name?this.addHiddenSellingPlan(a.id):(c(this.selectors.sellingPlanSelector).before('<div class="timesact_widget" id="timesact_widget">\n            <div class="timesact_widget_wrapper">\n                <div class="timesact_option">\n                    <div class="timesact_radio_wrapper">\n                        <input checked type="radio" id="timesact_selling_plan_label" name="selling_plan" value="" tabindex="2">\n                        <label for="timesact_selling_plan_label" class="timesact_radio_label">\n                            <span class="timesact_circle"><span class="timesact_dot"></span></span>\n                            <span class="timesact_text"></span>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        '),
c("#timesact_widget .timesact_text").text(a.options[0].value),c("#timesact_widget #timesact_selling_plan_label").val(a.id));var e=new u(b.locale||"en-US");this.showPreorderMessage(b.message.type,a.description,"selling-plan");e.addStylePreorderMessage(b.message,"selling-plan")}else console.log("SellingPlan was not found.");else console.log("Variant has no SellingPlan set.")}static displayBisModal(){const {defaultSettings:a,productId:b,productVariants:d,variantId:e}=window.ta.currentTimesactProductData;
var f=new y(b,d);f.setActiveVariant(e);f.setTimesactVariants({variants:d});({form:f}=f.getVariantSettings(window.ta.settings,a.templates.BIS,"BIS"));c("h3.timesact_bis_heading").attr("style",`color: ${f.headingFontColor} !important;`);c("#subscriptionForm .timesact_bis_submit_button").attr("style",`
				background: ${f.buttonBackgroundColor} !important;
				color: ${f.buttonFontColor} !important;
				border-radius: ${f.fieldsBorderRadius}px !important;
				font-size: ${f.fontSize}px !important;`);c("#subscriptionForm .timesact_bis_input").attr("style",`
				border-radius: ${f.fieldsBorderRadius}px !important;
				font-size: ${f.fontSize}px !important;`);c(".timesact_bis_popup").attr("style",`border-radius: ${f.popupBorderRadius}px !important;`);c(".timesact_bis_desc, .timesact_bis_note, .timesact_bis_subscribe").attr("style",`color: ${f.textFontColor} !important;`);c(".timesact_bis_email").attr("style",`border-radius: ${f.fieldsBorderRadius}px !important;`);c(".timesact_bis_heading").text(f.heading);c(".timesact_bis_desc").text(f.description);c(".timesact_bis_submit_button").text(f.buttonName);c(".timesact_bis_form_field .timesact_bis_note").text(f.note);
c(".timesact_bis_form_field .timesact_bis_subscribe").text(f.messageNewsletter);c(".timesact_bis_message_success").text(f.messageSuccess);c(".timesact_bis_message_error").text(f.messageError);!f.isNewsletterEnabled&&c(".timesact_sub").attr("style","display: none;");c(".timesact_bis_popup_overlay").addClass("timesact_bis_popup_overlay_show");c(".timesact_bis_dialog").addClass("timesact_bis_dialog_show");f.isBrandEnabled||c(".timesact_powered_by").hide()}addHiddenSellingPlan(a){c(this.selectors.formSelector).append(`<input type="hidden" checked="checked" data-timesact-selling-plan name="selling_plan" value="${a}" id="selling_plan_${a}">`)}addCommonElements(a,
b){var d="BIS"===a.type?"bis":"CS"===a.type?"cs":"IS"===a.type?"is":"preorder";"is"!==d&&c(this.selectors.formSelector).find(".shopify-payment-button").hide();this.addPreorderMessage(a.message,b,d);a.badge.product&&this.addBadge(this.selectors.badgeSelector,a.badge,d);this.selectors.hideProductElements&&c(this.selectors.hideProductElements).hide();if(d=a.message.timer)this[`timer${a.type}`].setTimerInfo({...d,productConfig:b[`config${"PO"!==a.type?a.type:""}`]}),this[`timer${a.type}`].show()}showPreorderLineItemProperty(a,
b){0===c(this.selectors.formSelector).find("#preorder-label").length?c(this.selectors.formSelector).append('<input type="hidden" id="preorder-label" name="properties['+a+']" value="'+b+'" />'):c(this.selectors.formSelector).find("#preorder-label").val(b)}removePreorderLineItemProperty(){c(this.selectors.formSelector).find("#preorder-label").remove()}removePreorderBadge(){c(this.selectors.badgeSelector).find(".timesact-badge-ribbon-preorder, .timesact-badge-ribbon-bis, .timesact-badge-ribbon-cs, .timesact-badge-ribbon-is").remove();
c(this.selectors.badgeSelector).find(".timesact-badge-common-preorder, .timesact-badge-common-bis, .timesact-badge-common-cs, .timesact-badge-common-is").remove()}removeSellingPlanWidget(){c("#timesact_widget").remove();c(".timesact-selling-plan-description").remove();c("[data-timesact-selling-plan]").remove()}addBadge(a,b,d){const e=new E;e.add(a,b.type,b.value,d);e.applyStyles(b,d)}addPreorderMessage(a,b,d){const e=new u(a.locale||"en-US");""!=a.value&&(b=e.populateDynamicValues(b,a.value,!1,"bis"===
d?"configBIS":"cs"===d?"configCS":"is"===d?"configIS":"config"),this.showPreorderMessage(a.type,b,d),e.addStylePreorderMessage(a,d))}showPreorderMessage(a,b,d){this.selectors.messageSelector?0===c(this.selectors.formSelector).find(`.timesact-${d}-description`).length?"BELOW"===a?c(this.selectors.messageSelector).after(`<div class='timesact-${d}-description'>`+b+"</div>"):c(this.selectors.messageSelector).before(`<div class='timesact-${d}-description'>`+b+"</div>"):c(this.selectors.formSelector).find(`.timesact-${d}-description`).val(b):
0===c(this.selectors.formSelector).find(`.timesact-${d}-description`).length?"BELOW"===a?c(this.selectors.buttonSelector).after(`<div class='timesact-${d}-description'>`+b+"</div>"):c(this.selectors.buttonSelector).before(`<div class='timesact-${d}-description'>`+b+"</div>"):c(this.selectors.formSelector).find(`.timesact-${d}-description`).val(b)}removePreorderMessage(){c(this.selectors.formSelector).find(".timesact-preorder-description, .timesact-bis-description, .timesact-cs-description, .timesact-is-description").remove()}removePreorderQuantity(){c(".timesact-quantity-message").remove();
c(this.selectors.quantitySelector).off("change.quantityChange");c(this.selectors.buttonSelector).off("click.quantityButtonClick")}addHiddenElements(){c(this.selectors.hideProductElements).show()}addQuantityListener(a){const b=this.selectors;c(this.selectors.quantitySelector).on("change.quantityChange",function(){a<parseInt(c(this).val())?(c(".timesact-quantity-message").length||(b.messageSelector?c(b.messageSelector).before("<div class='timesact-quantity-message' style='color:red'>"+`You can only pre-order ${a} items!`+
"</div>"):c(b.buttonSelector).before("<div class='timesact-quantity-message' style='color:red'>"+`You can only pre-order ${a} items!`+"</div>")),c(b.buttonSelector).prop("disabled",!0)):(c(".timesact-quantity-message").remove(),c(b.buttonSelector).prop("disabled",!1))});c(this.selectors.buttonSelector).on("click.quantityButtonClick",function(d){const e=c(b.quantitySelector).val();a<parseInt(e)?(d.preventDefault(),c(".timesact-quantity-message").length||(b.messageSelector?c(b.messageSelector).before("<div class='timesact-quantity-message' style='color:red'>"+
`You can only pre-order ${a} items!`+"</div>"):c(b.buttonSelector).before("<div class='timesact-quantity-message' style='color:red'>"+`You can only pre-order ${a} items!`+"</div>"))):c(".timesact-quantity-message").remove()})}}class K{initVariantEventListener(a){var b=this;c(document).on("click",".block-swatch",function(d){b.variantChangeHandler(a)});b.setup(function(){b.variantChangeHandler(a)})}sleep(a){return new Promise(function(b){setTimeout(b,a)})}variantChangeHandler(a){this.sleep(a.selectors.variantChangingTime).then(function(){var b=
"radio"===c(a.selectors.formSelector).find("select[name='id'], input[name='id'], select[name='id[]'], input[name='id[]']").attr("type")?c(a.selectors.formSelector).find("input[name='id']:checked, input[name='id[]']:checked").val():c(a.selectors.formSelector).find("select[name='id'], input[name='id'], select[name='id[]'], input[name='id[]']").val();console.log(b);a.product.setActiveVariant(b);a.resetDefault();a.createWidget()})}track(a,b,d){return function(){if(d)return b.apply(this,arguments),a.apply(this,
arguments);var e=a.apply(this,arguments);return b.apply(this,arguments),e}}setup(a){history.pushState=this.track(history.pushState,a);history.replaceState=this.track(history.replaceState,a);window.addEventListener("popstate",a)}}class x{static async createSubscription(a){try{return await c.ajax({url:"/apps/timesact/notifications/bis",type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(a)}),!0}catch(b){return console.log("Subscription no create",b),!1}}static async getProductPreOrderConfig(a){try{return await c.ajax({url:`/apps/timesact/config?productId=${a}`,
type:"GET",contentType:"application/json; charset=utf-8",dataType:"json"})}catch(b){return console.log("Product is not active on pre-order."),null}}async getProducts(a=[]){try{return await c.ajax({url:`/apps/timesact/products?productIds=${a}`,type:"GET",contentType:"application/json; charset=utf-8",dataType:"json"})}catch(b){return console.log("Products config couldn't be fetched."),null}}async getShop(){try{return await c.ajax({url:"/apps/timesact/shop",type:"GET",contentType:"application/json; charset=utf-8",
dataType:"json"})}catch(a){return console.log("Shop data couldn't be fetched."),null}}async getSettings(){try{return await c.ajax({url:"/apps/timesact/shop/settings",type:"GET",contentType:"application/json; charset=utf-8",dataType:"json"})}catch(a){return console.log("Settings data couldn't be fetched."),null}}}class F{constructor(a){this.ids=a}setNormalSelectors(){this.formSelector=c(this.ids.form);this.buttonSelector=this.formSelector.find(this.ids.addToCartButton);0===this.buttonSelector.length&&
(this.buttonSelector=this.formSelector.find('[type="submit"]:visible:first, [name="add"], .product-submit, .addtocart-button-active, .product-form--add-to-cart, .button--addToCart, .product-form__submit, .add-to-cart, .btn-addtocart, .single_add_to_cart_button, .product-form__cart-submit, .product-form--atc-button, .ProductForm__AddToCart, [type="button"]:visible:first').first());this.variantSelector=this.formSelector.find(this.ids.variant);this.ids.quantity?this.quantitySelector=this.formSelector.find(this.ids.quantity):
(this.quantitySelector=this.formSelector.find('[name="quantity"]'),0===this.quantitySelector.length&&(this.quantitySelector=c('[name="quantity"]')));this.badgeSelector=this.ids.badge?c(this.ids.badge):c(".timesact-badge");this.ids.message&&(this.messageSelector=this.formSelector.find(this.ids.message));this.sellingPlanSelector=this.formSelector.find('[type="submit"]:visible:first');this.ids.sellingPlan&&(this.sellingPlanSelector=this.formSelector.find(this.ids.sellingPlan));this.timerSelector=this.formSelector.find('[type="submit"]:visible:first');
this.ids.timer&&(this.timerSelector=this.formSelector.find(this.ids.timer));this.ids.hide&&this.ids.hide.product&&(this.hideProductElements=this.ids.hide.product);this.variantChangingTime=this.ids.variantChangingTime||250;0<this.formSelector.find('[data-pf-type="ProductATC"], [data-pf-type="ProductATC2"]').length&&(this.buttonSelector=this.formSelector.find('[data-pf-type="ProductATC"] span:first, [data-pf-type="ProductATC2"] span:first'),this.messageSelector=this.formSelector.find(this.ids.message||
'[data-pf-type="ProductATC"]'),this.badgeSelector=c('[data-pf-type="MainMedia"]'))}setQuickViewSelectors(){this.formSelector=c(window.ta.quickView.selectors.quickviewModalContainer).find(window.ta.quickView.selectors.form);this.buttonSelector=c(window.ta.quickView.selectors.quickviewModalContainer).find(window.ta.quickView.selectors.addToCartButton);this.variantSelector=c(window.ta.quickView.selectors.quickviewModalContainer).find(window.ta.quickView.selectors.variant);this.quantitySelector=c(window.ta.quickView.selectors.quickviewModalContainer).find(window.ta.quickView.selectors.quantity);
this.ids.message&&(this.messageSelector=this.formSelector.find(this.ids.message));this.variantChangingTime=this.ids.variantChangingTime||250;this.badgeSelector=this.ids.badge?c(this.ids.badge):c(".timesact-badge");this.sellingPlanSelector=this.formSelector.find('[type="submit"]:visible:first');this.ids.sellingPlan&&(this.sellingPlanSelector=c(this.ids.sellingPlan))}}class z{constructor(a,b){this.shop=a;this.product=b}async run(a){const b=await x.getProductPreOrderConfig(this.product.id);b?(window.ta.currentTimesactProductData=
{defaultSettings:this.shop.settings,productId:this.product.id,productName:this.product.title,productVariants:b.product.variants,variantId:null},this.selectors=new F(this.shop.selectors),a?this.selectors.setQuickViewSelectors():this.selectors.setNormalSelectors(),this.product.setActiveVariant((new I).extractVariantId(this.product.variants,this.selectors.formSelector)),this.product.setTimesactVariants(b.product),(new J(this.selectors,this.product,this.shop.settings.templates,this.shop)).init(),window.ta.products[this.product.id]=
{isPreorder:this.isActiveOnPreorder(b.product.variants),isBIS:this.isActiveOnBIS(b.product.variants),isCS:this.isActiveOnCS(b.product.variants),isIS:this.isActiveOnIS(b.product.variants),variants:b.product.variants,lastUpdate:parseInt((new Date).getTime()/1E3)}):window.ta.products[this.product.id]={isPreorder:!1,isBIS:!1,isCS:!1,isIS:!1,lastUpdate:parseInt((new Date).getTime()/1E3)};localStorage.setItem("products",JSON.stringify(window.ta.products))}hasCustomSettings(a,b){return a.variants[b].settings?
"CUSTOM"===a.variants[b].settings.type:!1}async getVariantSettings(a,b,d,e,f){if(!d.variants[e].config.settingsTemplate){if(!this.hasCustomSettings(d,e))return b;a=d.variants[e].settings;return{button:{...b.button,name:a.buttonName||b.button.name},message:{...b.message,type:a.messageType||b.message.type,value:a.messageValue||b.message.value},cart:{...b.cart,labelText:{key:a.cartLabelTextKey||b.cart.labelText.key,value:a.cartLabelTextValue||b.cart.labelText.value}},badge:b.badge}}return"PO"===f?d.variants[e].config.settingsTemplate in
a?a[d.variants[e].config.settingsTemplate]:b:"BIS"===f?d.variants[e].configBIS.settingsTemplate in a?a[d.variants[e].configBIS.settingsTemplate]:b:"CS"===f?d.variants[e].configCS.settingsTemplate in a?a[d.variants[e].configCS.settingsTemplate]:b:b}addSellingPlan(a,b,d,e){if(d.config.sellingPlan)if(a=a.find(g=>String(g.id)===d.config.sellingPlan)){"FULL_PAYMENT"===a.options[0].name?c(e).append(`<input type="hidden" checked="checked" data-timesact-selling-plan name="selling_plan" value="${a.id}" id="selling_plan_${a.id}">`):
(c(e).find(this.selectors.sellingPlanSelector).before('<div class="timesact_widget" id="timesact_widget">\n            <div class="timesact_widget_wrapper">\n                <div class="timesact_option">\n                    <div class="timesact_radio_wrapper">\n                        <input checked type="radio" id="timesact_selling_plan_label" name="selling_plan" value="" tabindex="2">\n                        <label for="timesact_selling_plan_label" class="timesact_radio_label">\n                            <span class="timesact_circle"><span class="timesact_dot"></span></span>\n                            <span class="timesact_text"></span>\n                        </label>\n                    </div>\n                </div>\n            </div>\n        </div>\n        '),
c("#timesact_widget .timesact_text").text(a.options[0].value),c("#timesact_widget #timesact_selling_plan_label").val(a.id));var f=new u(b.locale||"en-US");0===c(e).find(".timesact-selling-plan-description").length?c(e).find(this.selectors.messageSelector).after("<div class='timesact-selling-plan-description'>"+a.description+"</div>"):c(e).find(".timesact-selling-plan-description").val(a.description);f.addStylePreorderMessage(b.message,"selling-plan")}else console.log("SellingPlan was not found.");
else console.log("Variant has no SellingPlan set.")}async runHomepage(){const a=this;this.selectors=new F(this.shop.selectors);this.selectors.setNormalSelectors();var b=new Set;const d=c(this.selectors.formSelector);for(var e=0;e<d.length;e++){var f=c(d[e]).data("productid");f&&b.add(f)}if(b=await (new x).getProducts(Array.from(b)))for(f=window.ta.settings[this.shop.settings.templates.PO],e=0;e<d.length;e++){var g=c(d[e]).data("productid");if(!(g in b.products))continue;g=b.products[g];if(this.shop.hasSellingPlanEnabled){var k;
await c.getJSON(window.Shopify.routes.root+`products/${g.handle}.js`,function(q){k=new y(q.id,q.variants,q.title,q.selling_plan_groups)})}const n=c(d[e]).find("[name='id']").val(),m=await this.getVariantSettings(window.ta.settings,f,g,n,"PO"),r=c(d[e]).find(this.selectors.buttonSelector);if(n&&"NO_STOCK"!==g.variants[n].config.status){if("ACTIVE"===g.variants[n].config.status){c(r).val(m.button.name);c(r).text(m.button.name);c(r).prop("disabled",!1);c(d[e]).find(".shopify-payment-button").hide();
var h=new u(f.message.locale||"en-US");if("undefined"===typeof m.cart.labelText.isEnabled||m.cart.labelText.isEnabled){var l=h.populateDynamicValues(g.variants[n],m.cart.labelText.key,!1,"config");const q=h.populateDynamicValues(g.variants[n],m.cart.labelText.value,!1,"config");0===c(d[e]).find("#preorder-label").length?c(d[e]).append('<input type="hidden" id="preorder-label" name="properties['+l+']" value="'+q+'" />'):c(d[e]).find("#preorder-label").val(q)}this.shop.hasSellingPlanEnabled&&this.addSellingPlan(k.sellingPlans,
m,g.variants[n],d[e]);l=h.populateDynamicValues(g.variants[n],m.message.value,!1,"config");0===c(d[e]).find(".timesact-preorder-description").length?c(d[e]).find(this.selectors.messageSelector).after("<div class='timesact-preorder-description'>"+l+"</div>"):c(d[e]).find(".timesact-preorder-description").val(l);h.addStylePreorderMessage(m.message,"preorder");h=new E;h.add(c(d[e]).parent().parent().parent().parent().parent().find(".image--container:first"),m.badge.type,m.badge.value);h.applyStyles(m.badge)}if("NO_SET"===
g.variants[n].config.status||"PENDING"===g.variants[n].config.status)c(r).val(m.button.addToCartText),c(r).text(m.button.addToCartText),c(d[e]).find(".timesact-preorder-description").remove(),c(d[e]).find("#preorder-label").remove(),c(d[e]).parent().parent().parent().parent().parent().find(".timesact-badge-common").remove();c(d[e]).parent().parent().parent().find("[type='radio']").on("click.variant",function(){a.runHomepage()})}else c(r).val(m.button.soldOutText),c(r).text(m.button.soldOutText),c(r).prop("disabled",
!0),c(d[e]).find(".timesact-preorder-description").remove(),c(d[e]).find("#preorder-label").remove(),c(d[e]).parent().parent().parent().parent().parent().find(".timesact-badge-common").remove()}else console.log("[Error] Timesact API getProducts.")}async runCollection(){if(window.ta.settings[this.shop.settings.templates.PO].badge.collection||window.ta.settings[this.shop.settings.templates.BIS].badge.collection||window.ta.settings[this.shop.settings.templates.CS].badge.collection||window.ta.settings[this.shop.settings.templates.IS].badge.collection){this.shop.lastProductUpdate&&
window.ta.lastProductUpdate<this.shop.lastProductUpdate&&(window.ta.products={});let a='.timesact-badge .product-item .card--standard .card--card .ProductItem [data-pf-type="ProductBox"]'.split(" ");this.shop.selectors.collection&&this.shop.selectors.collection.badge&&(a=[this.shop.selectors.collection.badge]);let b=[];for(let d=0;d<a.length;d++)if(0<c(a[d]).length){b=c(a[d]);break}this.enableBadgeOnCollection(b)}}async runMixedCartAlert(a){if(window.ta.cart.showMixedCartAlert&&a.items.length){var b=
window.location.pathname.includes("cart"),d=window.ta.settings[this.shop.settings.templates.PO];if(!(!d.cart.mixed.isEnabled||b&&!1===d.cart.mixed.onCartPage||!b&&!0!==d.cart.mixed.onButtonClick)){var e=b=!1,f={};for(var g of a.items)window.ta.products[g.product_id]?window.ta.products[g.product_id].variants&&window.ta.products[g.product_id].variants[g.variant_id]&&"ACTIVE"===window.ta.products[g.product_id].variants[g.variant_id].config.status?b=!0:e=!0:(f[g.product_id]=f[g.product_id]||[],f[g.product_id].push(g.variant_id));
a=new t;d={...d.cart.mixed,id:d.id||d.name};g=()=>{window.sessionStorage.setItem("showCartMixedAlert",!c("#md-stop").is(":checked"));window.ta.cart.showMixedCartAlert=!c("#md-stop").is(":checked")};if(b&&e)return a.display(d,g);if(Object.keys(f).length){var k=await (new x).getProducts(Object.keys(f));if(k){for(const h of Object.keys(f))if(h in k.products){for(const l of f[h])k.products[h].variants[l]&&"ACTIVE"===k.products[h].variants[l].config.status?b=!0:e=!0;window.ta.products[h]={isPreorder:this.isActiveOnPreorder(k.products[h].variants),
isBIS:this.isActiveOnBIS(k.products[h].variants),isCS:this.isActiveOnCS(k.products[h].variants),isIS:this.isActiveOnIS(k.products[h].variants),variants:k.products[h].variants,lastUpdate:parseInt((new Date).getTime()/1E3)};if(e&&b){a.display(d,g);break}}else e=!0,window.ta.products[h]={isPreorder:!1,isBIS:!1,isCS:!1,lastUpdate:parseInt((new Date).getTime()/1E3)};localStorage.setItem("products",JSON.stringify(window.ta.products))}else console.log("[Error] Timesact API getProducts.")}}}}async runCartAlert(a){if(a.items.length){var b=
{};for(e of a.items){var d=window.ta.products[e.product_id];d&&(a=d?.variants?.[e.variant_id],d=d.isIS?"configIS":"config","ACTIVE"===a?.[d]?.status&&(b[e.product_id]={...(b[e.product_id]||{}),[e.variant_id]:a}))}if(Object.keys(b).length){a=JSON.parse(window.sessionStorage.getItem("showCartAlert")||null)||{};var e={};for(const [f,g]of Object.entries(b))for(const [k,h]of Object.entries(g))b=window.ta.settings[h[h.isISEnabled?"configIS":"config"]?.settingsTemplate],d=`${b.type}-${f}-${k}`,e[d]={dismiss:!!a[d]?.dismiss,
settings:{id:d,...b.cart?.alert}};b=f=>()=>{const g=JSON.parse(window.sessionStorage.getItem("showCartAlert")||null)||{};return(new A("","")).closeCartAlertModal(f,g)};for(const f of Object.values(e))f.settings.isEnabled&&!1!==f.settings.onCartPage&&!f.dismiss&&t.pushQueue(f.settings,b(f.settings));t.showFirst()}}}isActiveOnPreorder(a){return Object.values(a).every(b=>"ACTIVE"===b.config.status)}isActiveOnBIS(a){return Object.values(a).every(b=>b.configBIS&&"ACTIVE"===b.configBIS.status)}isActiveOnCS(a){return Object.values(a).every(b=>
b.configCS&&"ACTIVE"===b.configCS.status)}isActiveOnIS(a){return Object.values(a).some(b=>b.configIS&&"ACTIVE"===b.configIS.status)}async enableBadgeOnCollection(a){if(0===a.length)console.log("No items detected.");else{var b={},d=window.ta.settings[this.shop.settings.templates.PO],e=window.ta.settings[this.shop.settings.templates.BIS],f=window.ta.settings[this.shop.settings.templates.CS],g=window.ta.settings[this.shop.settings.templates.IS];await Promise.all(Array.from(a).map(async k=>{if(c(k).data("product-id"))var h=
c(k).data("product-id");else{h=c(k).find("a").attr("href");if(!h)return;var l=h.split("/").pop().split("?")[0];if(!l)return;console.log("Product handle: ",l);h=await c.getJSON(window.location.origin+h);if(!h||!h.product||!h.product.id)return;h=String(h.product.id)}window.ta.products[h]?(l=!1,window.ta.products[h].isPreorder&&d.badge.collection&&(this.addBadge(k,d.badge,"preorder"),l=!0,d.button.collection&&d.button.collection.isEnabled&&this.enableButtonOnCollection(k,this.shop,window.ta.products[h],
d)),window.ta.products[h].isBIS&&e.badge.collection&&(this.addBadge(k,e.badge,"bis"),l=!0),window.ta.products[h].isCS&&f.badge.collection&&(this.addBadge(k,f.badge,"cs"),l=!0),window.ta.products[h].isIS&&g.badge.collection&&(this.addBadge(k,g.badge,"is"),l=!0),l&&this.shop.selectors.hide&&this.shop.selectors.hide.collection&&c(k).find(this.shop.selectors.hide.collection).hide()):b[h]=k}));if(a=await (new x).getProducts(Object.keys(b))){for(const [k,h]of Object.entries(b)){if(!(k in a.products)){window.ta.products[k]=
{isPreorder:!1,isBIS:!1,isCS:!1,isIS:!1,lastUpdate:parseInt((new Date).getTime()/1E3)};continue}const l=this.isActiveOnPreorder(a.products[k].variants),n=this.isActiveOnBIS(a.products[k].variants),m=this.isActiveOnCS(a.products[k].variants),r=this.isActiveOnIS(a.products[k].variants);let q=!1;l&&d.badge.collection&&(this.addBadge(h,d.badge,"preorder"),q=!0,d.button.collection&&d.button.collection.isEnabled&&this.enableButtonOnCollection(h,this.shop,a.products[k],d));n&&e.badge.collection&&(this.addBadge(h,
e.badge,"bis"),q=!0);m&&f.badge.collection&&(this.addBadge(h,f.badge,"cs"),q=!0);r&&g.badge.collection&&(this.addBadge(h,g.badge,"is"),q=!0);q&&this.shop.selectors.hide&&this.shop.selectors.hide.collection&&c(h).find(this.shop.selectors.hide.collection).hide();window.ta.products[k]={isPreorder:l,isBIS:n,isCS:m,isIS:r,variants:a.products[k].variants,lastUpdate:parseInt((new Date).getTime()/1E3)}}localStorage.setItem("products",JSON.stringify(window.ta.products))}else console.log("[Error] Timesact API getProducts.")}}enableButtonOnCollection(a,
b,d,e){var f='form[action="/cart/add"]';b.selectors.collection&&b.selectors.collection.form&&(f=b.selectors.collection.form);let g='[type=submit]:visible:first, [data-pf-type="ProductATC"] span:first, [data-pf-type="ProductATC2"] span:first';b.selectors.collection&&b.selectors.collection.addToCartButton&&(g=b.selectors.collection.addToCartButton);f=c(a).find(f);for(let l in d.variants)if("ACTIVE"===d.variants[l].config.status){var k=c(a).find(g),h=window.ta.settings[d.variants[l].config.settingsTemplate]?
window.ta.settings[d.variants[l].config.settingsTemplate].button.name:e.button.name;c(k).val(h);c(k).text(h);c(k).prop("disabled",!1);c(a).find(".shopify-payment-button").hide();k=new u(e.message.locale||"en-US");h=window.ta.settings[d.variants[l].config.settingsTemplate]?window.ta.settings[d.variants[l].config.settingsTemplate].cart.labelText.value:e.cart.labelText.value;let n=window.ta.settings[d.variants[l].config.settingsTemplate]?window.ta.settings[d.variants[l].config.settingsTemplate].cart.labelText.key:
e.cart.labelText.key,m=window.ta.settings[d.variants[l].config.settingsTemplate]?window.ta.settings[d.variants[l].config.settingsTemplate].cart.labelText.isEnabled:e.cart.labelText.isEnabled;b.hasSellingPlanEnabled&&d.variants[l].config.sellingPlan&&c(f).append(`<input type="hidden" checked="checked" data-timesact-selling-plan name="selling_plan" value="${d.variants[l].config.sellingPlan}" id="selling_plan_${d.variants[l].config.sellingPlan}">`);if("undefined"===typeof m||m)n=k.populateDynamicValues(d.variants[l],
n,!0,"config"),h=k.populateDynamicValues(d.variants[l],h,!0,"config"),0===c(f).find("#preorder-label").length?c(f).append('<input type="hidden" id="preorder-label" name="properties['+n+']" value="'+h+'" />'):c(f).find("#preorder-label").val(h)}}addBadge(a,b,d){0<c(a).find('[data-pf-type="ProductMedia"], [data-pf-type="ProductMedia2"]').length&&(a=c(a).find('[data-pf-type="ProductMedia"], [data-pf-type="ProductMedia2"]'));"absolute"!==c(a).css("position")&&c(a).css({position:"relative"});const e=new E;
e.add(a,b.type,b.value,d);e.applyStyles(b,d)}}c(document).ready(async function(){function a(f=0,g=!1){(JSON.parse(window.sessionStorage.getItem("closedModals")||null)||[]).includes(e.settings.templates.PO)||setTimeout(()=>{c.getJSON(window.location.origin+"/cart",function(k){g&&(new z(e)).runCartAlert(k);(new z(e)).runMixedCartAlert(k)}).fail(function(){console.log("[Error 1001]: Product could not be fetched.")})},f)}var b=new x;const d=new H;C.createListeners();d.initTimesact();if(d.isProductPage()||
d.isCollectionPage()||d.isSearchPage()||d.isPagesPage()||d.isHomePage()||d.isCartPage()){var e=await b.getShop();if(!window.ta.settings||e.lastSettingsUpdate&&window.ta.lastSettingsUpdate<e.lastSettingsUpdate)({settings:b}=await b.getSettings()),window.ta.settings=b,window.ta.lastSettingsUpdate=e.lastSettingsUpdate||parseInt((new Date).getTime()/1E3),localStorage.setItem("settings",JSON.stringify(window.ta.settings)),localStorage.setItem("lastSettingsUpdate",JSON.stringify(window.ta.lastSettingsUpdate));
if(d.isProductPage()){let f={};c.getJSON(window.location.href.split("?")[0].concat(".js"),function(g){f=new y(g.id,g.variants,g.title,g.selling_plan_groups)}).done(function(){(new z(e,f)).run(!1)}).fail(function(){console.log("[Error 1001]: Product could not be fetched.")})}if(d.isCollectionPage()||d.isHomePage()||d.isSearchPage()||d.isPagesPage())d.initQuickView(e),(new z(e)).runCollection();b=c(e.selectors.form).find(e.selectors.addToCartButton);"button"!==b.prop("tagName")&&(b=b.parent());b.click(()=>
a(2E3));c('a[href="/cart"]').click(()=>a(500));d.isCartPage()&&a(0,!0)}})};"undefined"===typeof jQuery||100>parseFloat(jQuery.fn.jquery)?G("https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js",function(){jQuery191=jQuery.noConflict(!0);timesactScriptNew(jQuery191)}):timesactScriptNew(jQuery)})();
